{"version":3,"sources":["services/persons.js","Components/AddRecord.js","Components/Records.js","Components/Filter.js","Components/Notification.js","App.js","index.js"],"names":["apiUrl","axios","get","then","response","data","newRecord","post","id","delete","status","put","AddRecord","newName","setNewName","newNumber","setNewNumber","persons","setPersons","updateRecord","setNotification","onSubmit","event","preventDefault","name","number","every","person","phonebookService","returnedRecord","concat","content","type","window","confirm","changedRecord","find","p","target","value","onChange","placeholder","Record","deleteRecord","onClick","Records","map","key","Filter","setFilterTerm","Notification","notification","text","toLocaleLowerCase","className","setTimeout","App","useState","filterTerm","useEffect","initialData","filteredRecords","filter","includes","recordToUpdate","catch","error","ReactDOM","render","document","getElementById"],"mappings":"+OAEMA,EAAM,UADI,yBACJ,eAsBG,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAkB5B,EAfG,SAAAC,GAEhB,OADgBL,IAAMM,KAAKP,EAAQM,GACpBH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAa5B,EAVM,SAAAG,GAEnB,OADgBP,IAAMQ,OAAN,UAAgBT,EAAhB,YAA0BQ,IAC3BL,KAAK,SAAAC,GAAQ,OAAIA,EAASM,UAQ5B,EALM,SAAAJ,GAEnB,OADgBL,IAAMU,IAAN,UAAaX,EAAb,YAAuBM,EAAUE,IAAMF,GACxCH,KAAK,SAAAC,GAAQ,OAAIA,K,oOClBlC,IAyFeQ,EAzFG,SAAC,GASZ,IARLC,EAQI,EARJA,QACAC,EAOI,EAPJA,WACAC,EAMI,EANJA,UACAC,EAKI,EALJA,aACAC,EAII,EAJJA,QACAC,EAGI,EAHJA,WACAC,EAEI,EAFJA,aACAC,EACI,EADJA,gBAqDA,OACE,6BACE,yCACA,0BAAMC,SAtCW,SAAAC,GACnBA,EAAMC,iBAEN,IAAMjB,EAAY,CAChBkB,KAAMX,EACNY,OAAQV,GAGV,GAvBOE,EAAQS,MAAM,SAAAC,GACnB,OAAId,IAAYc,EAAOH,OAmCvBI,EAA2BtB,GAAWH,KAAK,SAAA0B,GACzCX,EAAWD,EAAQa,OAAOD,IAC1BT,EAAgB,CACdW,QAAS,6BACTC,KAAM,mBAZV,GAJqBC,OAAOC,QAAP,UAChBrB,EADgB,sEAIH,CAChB,IAAMsB,E,qVAAa,IACdlB,EAAQmB,KAAK,SAAAC,GAAC,OAAIA,EAAEb,OAASX,IADf,CAEjBY,OAAQV,IAEVI,EAAagB,GAWjBb,EAAMgB,OAAOd,KAAKe,MAAQ,GAC1BjB,EAAMgB,OAAOb,OAAOc,MAAQ,GAC5BzB,EAAW,IACXE,EAAa,MAOT,6BACE,yCACA,2BACEQ,KAAK,OACLgB,SAlDiB,SAAAlB,GACzBR,EAAWQ,EAAMgB,OAAOC,QAkDhBE,YAAY,sBAGhB,6BACE,2CACA,2BACEjB,KAAK,SACLgB,SAvDmB,SAAAlB,GAC3BN,EAAaM,EAAMgB,OAAOC,QAuDlBE,YAAY,wBAGhB,6BACE,4BAAQT,KAAK,UAAb,WCnFJU,EAAS,SAAC,GAA8B,IAA5Bf,EAA2B,EAA3BA,OAAQgB,EAAmB,EAAnBA,aAOxB,OACE,2BACGhB,EAAOH,KADV,IACiBG,EAAOF,OADxB,QAEE,4BAAQmB,QATc,WACpBX,OAAOC,QAAP,iBAAyBP,EAAOH,KAAhC,OACFmB,EAAahB,EAAOnB,MAOpB,YAsBSqC,EAjBC,SAAC,GAA+B,IAA7B5B,EAA4B,EAA5BA,QAAS0B,EAAmB,EAAnBA,aAC1B,OACE,6BACE,uCACC1B,EAAQ6B,IAAI,SAAAnB,GACX,OACE,kBAAC,EAAD,CACEoB,IAAKpB,EAAOH,KACZG,OAAQA,EACRgB,aAAcA,QCXXK,EAbA,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,cAKhB,OACE,6BACE,sDACA,2BAAOT,SAPkB,SAAAlB,GAC3B2B,EAAc3B,EAAMgB,OAAOC,YCuChBW,EAzCM,SAAC,GAAuC,IAArCC,EAAoC,EAApCA,aAAc/B,EAAsB,EAAtBA,gBACpC,GAA6B,OAAzB+B,EAAapB,SAA6C,KAAzBoB,EAAapB,QAChD,OAAO,KAGT,IAAIqB,EAAO,GAEX,OAAQD,EAAanB,KAAKqB,qBACxB,IAAK,UACHD,EAAO,YACP,MACF,IAAK,OACHA,EAAO,SACP,MACF,IAAK,UACHA,EAAO,YACP,MACF,IAAK,SACHA,EAAO,WACP,MACF,QACEhC,EAAgB,CAAEW,QAAS,KAAMC,KAAM,SAS3C,OACE,oCACE,yBAAKsB,UAAW,SAAWH,EAAanB,MACtC,8BAAOoB,GACND,EAAapB,cATlBwB,WAAW,WACTnC,EAAgB,CAAEW,QAAS,KAAMC,KAAM,UACtC,IASY,KCgEJwB,EA/FH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTxC,EADS,KACAC,EADA,OAEcuC,mBAAS,IAFvB,mBAET5C,EAFS,KAEAC,EAFA,OAGkB2C,mBAAS,IAH3B,mBAGT1C,EAHS,KAGEC,EAHF,OAIoByC,mBAAS,IAJ7B,mBAITC,EAJS,KAIGT,EAJH,OAKwBQ,mBAAS,CAC/C1B,QAAS,KACTC,KAAM,SAPQ,mBAKTmB,EALS,KAKK/B,EALL,KAUhBuC,oBAAU,WACR/B,IAA0BzB,KAAK,SAAAyD,GAC7B1C,EAAW0C,MAEZ,IAEH,IAAMC,EAAkB5C,EAAQ6C,OAAO,SAAAnC,GACrC,MAAmB,KAAf+B,EACK/B,EAEaA,EAAOH,KAAK6B,oBACbU,SAASL,EAAWL,uBAmD3C,OACE,6BACE,yCACA,kBAAC,EAAD,CACEF,aAAcA,EACd/B,gBAAiBA,IAEnB,kBAAC,EAAD,CAAQ6B,cAAeA,IACvB,kBAAC,EAAD,CACEpC,QAASA,EACTC,WAAYA,EACZC,UAAWA,EACXC,aAAcA,EACdC,QAASA,EACTC,WAAYA,EACZC,aAxCe,SAAA6C,GACnBpC,EACgBoC,GACb7D,KAAK,SAAAC,GACoB,MAApBA,EAASM,QACXU,EAAgB,CACdW,QAAS,wCACTC,KAAM,cAIXiC,MAAM,SAAAC,GAEa,MADAA,EAAM9D,SAASM,QAE/BU,EAAgB,CACdW,QAAQ,6DACRC,KAAM,aAIdd,EACED,EAAQ6B,IAAI,SAAAT,GAAC,OAAKA,EAAE7B,KAAOwD,EAAexD,GAAK6B,EAAI2B,MAoBjD5C,gBAAiBA,IAEnB,kBAAC,EAAD,CAASH,QAAS4C,EAAiBlB,aAlElB,SAAAnC,GACnBoB,EACgBpB,GACbL,KAAK,SAAAC,GACa,MAAbA,GACFgB,EAAgB,CACdW,QAAQ,8BACRC,KAAM,WAIXiC,MAAM,SAAAC,GAEa,MADAA,EAAM9D,SAASM,QAE/BU,EAAgB,CACdW,QAAQ,8DACRC,KAAM,aAIdd,EAAWD,EAAQ6C,OAAO,SAAAnC,GAAM,OAAIA,EAAOnB,KAAOA,UC5CtD2D,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.e8f3205f.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"http://localhost:3001/\";\r\nconst apiUrl = `${baseUrl}api/persons`;\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(apiUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst addRecord = newRecord => {\r\n  const request = axios.post(apiUrl, newRecord);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst deleteRecord = id => {\r\n  const request = axios.delete(`${apiUrl}/${id}`);\r\n  return request.then(response => response.status);\r\n};\r\n\r\nconst updateRecord = newRecord => {\r\n  const request = axios.put(`${apiUrl}/${newRecord.id}`, newRecord);\r\n  return request.then(response => response);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  addRecord,\r\n  deleteRecord,\r\n  updateRecord\r\n};\r\n","import React from \"react\";\r\nimport phonebookService from \"../services/persons\";\r\n\r\nconst AddRecord = ({\r\n  newName,\r\n  setNewName,\r\n  newNumber,\r\n  setNewNumber,\r\n  persons,\r\n  setPersons,\r\n  updateRecord,\r\n  setNotification\r\n}) => {\r\n  const verifyName = () => {\r\n    return persons.every(person => {\r\n      if (newName === person.name) {\r\n        return false;\r\n      }\r\n      return true;\r\n    });\r\n  };\r\n\r\n  const handleNameOnChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n  const handleNumberOnChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n    const newRecord = {\r\n      name: newName,\r\n      number: newNumber\r\n    };\r\n\r\n    if (!verifyName()) {\r\n      const changeNumber = window.confirm(\r\n        `${newName} is already in the phonebook, replace the old one with a new one?`\r\n      );\r\n\r\n      if (changeNumber) {\r\n        const changedRecord = {\r\n          ...persons.find(p => p.name === newName),\r\n          number: newNumber\r\n        };\r\n        updateRecord(changedRecord);\r\n      }\r\n    } else {\r\n      phonebookService.addRecord(newRecord).then(returnedRecord => {\r\n        setPersons(persons.concat(returnedRecord));\r\n        setNotification({\r\n          content: \"Record added successfully!\",\r\n          type: \"success\"\r\n        });\r\n      });\r\n    }\r\n    event.target.name.value = \"\";\r\n    event.target.number.value = \"\";\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Add a new</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          <label>Name: </label>\r\n          <input\r\n            name='name'\r\n            onChange={handleNameOnChange}\r\n            placeholder='Enter a new name'\r\n          />\r\n        </div>\r\n        <div>\r\n          <label>Number: </label>\r\n          <input\r\n            name='number'\r\n            onChange={handleNumberOnChange}\r\n            placeholder='Enter a new number'\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type='submit'>add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddRecord;\r\n","import React from \"react\";\r\n\r\nconst Record = ({ person, deleteRecord }) => {\r\n  const handleDeleteClick = () => {\r\n    if (window.confirm(`Delete ${person.name}?`)) {\r\n      deleteRecord(person.id);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <p>\r\n      {person.name} {person.number} &nbsp;\r\n      <button onClick={handleDeleteClick}>delete</button>\r\n    </p>\r\n  );\r\n};\r\n\r\nconst Records = ({ persons, deleteRecord }) => {\r\n  return (\r\n    <div>\r\n      <h2>Numbers</h2>\r\n      {persons.map(person => {\r\n        return (\r\n          <Record\r\n            key={person.name}\r\n            person={person}\r\n            deleteRecord={deleteRecord}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Records;\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ setFilterTerm }) => {\r\n  const handleSearchOnChange = event => {\r\n    setFilterTerm(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <label>Filter shown with: </label>\r\n      <input onChange={handleSearchOnChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notification, setNotification }) => {\r\n  if (notification.content === null || notification.content === \"\") {\r\n    return null;\r\n  }\r\n\r\n  let text = \"\";\r\n\r\n  switch (notification.type.toLocaleLowerCase()) {\r\n    case \"success\":\r\n      text = \"Success: \";\r\n      break;\r\n    case \"info\":\r\n      text = \"Info: \";\r\n      break;\r\n    case \"warning\":\r\n      text = \"Warning: \";\r\n      break;\r\n    case \"danger\":\r\n      text = \"Danger: \";\r\n      break;\r\n    default:\r\n      setNotification({ content: null, type: \"info\" });\r\n  }\r\n\r\n  const startTimout = sec => {\r\n    setTimeout(() => {\r\n      setNotification({ content: null, type: \"info\" });\r\n    }, 1000 * sec);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={\"alert \" + notification.type}>\r\n        <span>{text}</span>\r\n        {notification.content}\r\n      </div>\r\n      {startTimout(5)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport phonebookService from \"./services/persons\";\r\nimport AddRecord from \"./Components/AddRecord\";\r\nimport Records from \"./Components/Records\";\r\nimport Filter from \"./Components/Filter\";\r\nimport Notification from \"./Components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filterTerm, setFilterTerm] = useState(\"\");\r\n  const [notification, setNotification] = useState({\r\n    content: null,\r\n    type: \"info\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    phonebookService.getAll().then(initialData => {\r\n      setPersons(initialData);\r\n    });\r\n  }, []);\r\n\r\n  const filteredRecords = persons.filter(person => {\r\n    if (filterTerm === \"\") {\r\n      return person;\r\n    }\r\n    const lowerCaseName = person.name.toLocaleLowerCase();\r\n    return lowerCaseName.includes(filterTerm.toLocaleLowerCase());\r\n  });\r\n\r\n  const deleteRecord = id => {\r\n    phonebookService\r\n      .deleteRecord(id)\r\n      .then(response => {\r\n        if (response === 200) {\r\n          setNotification({\r\n            content: `The entry has been deleted!`,\r\n            type: \"info\"\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        const errorCode = error.response.status;\r\n        if (errorCode === 404) {\r\n          setNotification({\r\n            content: `This record is not in phonebook or has already been deleted`,\r\n            type: \"danger\"\r\n          });\r\n        }\r\n      });\r\n    setPersons(persons.filter(person => person.id !== id));\r\n  };\r\n\r\n  const updateRecord = recordToUpdate => {\r\n    phonebookService\r\n      .updateRecord(recordToUpdate)\r\n      .then(response => {\r\n        if (response.status === 200) {\r\n          setNotification({\r\n            content: \"Record has been updated successfully!\",\r\n            type: \"success\"\r\n          });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        const errorCode = error.response.status;\r\n        if (errorCode === 404) {\r\n          setNotification({\r\n            content: `This record is not in phonebook or has already been delted`,\r\n            type: \"danger\"\r\n          });\r\n        }\r\n      });\r\n    setPersons(\r\n      persons.map(p => (p.id !== recordToUpdate.id ? p : recordToUpdate))\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Notification\r\n        notification={notification}\r\n        setNotification={setNotification}\r\n      />\r\n      <Filter setFilterTerm={setFilterTerm} />\r\n      <AddRecord\r\n        newName={newName}\r\n        setNewName={setNewName}\r\n        newNumber={newNumber}\r\n        setNewNumber={setNewNumber}\r\n        persons={persons}\r\n        setPersons={setPersons}\r\n        updateRecord={updateRecord}\r\n        setNotification={setNotification}\r\n      />\r\n      <Records persons={filteredRecords} deleteRecord={deleteRecord} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css'\nimport App from './App'\n\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}